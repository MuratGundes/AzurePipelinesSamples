parameters:
- name: 'repositoryUrl'
  type: string

- name: 'dotnet_core_version'
  type: string

- name: 'solution_path'
  type: string

- name: 'config'
  type: string

steps:
# - ${{ if eq(parameters.toolset, 'dotnet') }}:
  - task: UseDotNet@2
    displayName: Install .Net Core
    condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'))
    inputs:
      version: $(dotnet_core_version)
      performMultiLevelLookup: true

# - ${{ if eq(parameters.toolset, 'dotnet') }}:
  - task: DotNetCoreCLI@2
    displayName: Restore Packages
    inputs:
      command: restore
      projects: $(solution_path)

# - ${{ if eq(parameters.toolset, 'dotnet') }}:
  - task: DotNetCoreCLI@2
    displayName: Build
    condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'))
    inputs:
      command: build
      projects: $(solution_path)
      arguments: '--configuration $(config) --no-restore'
